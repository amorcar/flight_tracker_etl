# Useless Flight Tracker

This ETL/ELT data pipeline to track the origin country of planes that fly across a ROI.

The pipeline fetch the data (from the public [Live OpenSky API](https://openskynetwork.github.io/opensky-api/) every 15 minutes.
The data consists of the current planes located inside a region of interest in Manhattan.

First, the pipeline stores all fetched raw data in a DB.
Then the data is transformed into parsed data containing only the necessary information.
Also, the data is filtered to avoid storing duplicate entries in the DB.
If a plane is already detected in the DB and it's last update time is less than 1 hour, the entry is discarded.
Then, another task retrieves the clean data from the DB and transform it to count the ocurrencies of the country or origin of each flight.
This data is stored and updated in the DB using SQL instructions.
Another task retrieve this information from the DB and use it to plot an histogram plot the data in an intuitive way.

![pipeline_autogenerated_diagram](https://github.com/amorcar/flight_tracker_etl/blob/main/flow_diagram.png?raw=true)

The pipeline uses [Prefect](https://docs.prefect.io) for the tasks and flow orchestration.

To run:
```bash
git clone https://github.com/amorcar/flight_tracker_etl.git
cd flight_tracker_etl
python3 -m venv venv --prompt prefect_env
source venv/bin/activate
pip install prefect[viz] matplotlib
python app/main.py
```
